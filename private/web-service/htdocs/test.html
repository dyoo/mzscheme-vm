<html>
<head>
    <script type="text/javascript" src="/easyXDM.min.js"></script>
    <script type="text/javascript">
      easyXDM.DomHelper.requiresJSON("/json2.js");
    </script>

    <script>
    var rpc = new easyXDM.Rpc(
	{ remote: "provider.html" },
	{
	    local: {compile : function(version, name, lang, text) {}},
	    remote: { compile : {}}});


    var doCompilation = function() {
        rpc.compile('1',
                    'my program',
                    'wescheme-interaction',
                    document.getElementById("textarea").value,
                    function(response) {
                         console.log(response.code);
                    },
                    function(error) {
                         alert(error.message);
                    });

    };
</script>
<body>
<textarea id="textarea">
(printf "Hello world!\n")
</textarea>
<input type="button" value="compile" onclick="doCompilation()">
</body>
</html>
